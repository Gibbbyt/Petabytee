(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[566],{459:function(e,t,s){Promise.resolve().then(s.bind(s,966))},966:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var r=s(7437),a=s(2265);let l={pending:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",processing:"bg-blue-500/20 text-blue-400 border-blue-500/30",shipped:"bg-purple-500/20 text-purple-400 border-purple-500/30",delivered:"bg-green-500/20 text-green-400 border-green-500/30",cancelled:"bg-red-500/20 text-red-400 border-red-500/30"},n={paid:"bg-green-500/20 text-green-400 border-green-500/30",pending:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",failed:"bg-red-500/20 text-red-400 border-red-500/30",refunded:"bg-gray-500/20 text-gray-400 border-gray-500/30"};function d(e){let{status:t,type:s="order"}=e,a=("payment"===s?n:l)[t]||"bg-gray-500/20 text-gray-400 border-gray-500/30";return(0,r.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium border ".concat(a),children:t.charAt(0).toUpperCase()+t.slice(1)})}function c(e){let{order:t,isOpen:s,onClose:a,onStatusUpdate:l}=e;if(!s||!t)return null;let n=e=>new Date(e).toLocaleString("en-GB",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),c=e=>{l(t.id,e)};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center p-6 border-b border-gray-700",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-cyan-400",children:"Order Details"}),(0,r.jsx)("p",{className:"text-gray-400",children:t.id})]}),(0,r.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-white text-2xl",children:"\xd7"})]}),(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,r.jsxs)("div",{className:"bg-gray-800/50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"font-semibold text-white mb-2",children:"Order Status"}),(0,r.jsx)(d,{status:t.status}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("label",{className:"text-sm text-gray-400",children:"Update Status:"}),(0,r.jsxs)("select",{value:t.status,onChange:e=>c(e.target.value),className:"mt-1 w-full bg-gray-700 border border-gray-600 rounded px-3 py-2 text-white",children:[(0,r.jsx)("option",{value:"pending",children:"Pending"}),(0,r.jsx)("option",{value:"processing",children:"Processing"}),(0,r.jsx)("option",{value:"shipped",children:"Shipped"}),(0,r.jsx)("option",{value:"delivered",children:"Delivered"}),(0,r.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-800/50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"font-semibold text-white mb-2",children:"Payment Status"}),(0,r.jsx)(d,{status:t.paymentStatus,type:"payment"}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Total Amount"}),(0,r.jsxs)("p",{className:"text-xl font-bold text-green-400",children:["€",t.total]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-800/50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"font-semibold text-white mb-2",children:"Dates"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Order Date"}),(0,r.jsx)("p",{className:"text-white",children:n(t.orderDate)})]}),t.estimatedDelivery&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Est. Delivery"}),(0,r.jsx)("p",{className:"text-white",children:n(t.estimatedDelivery)})]}),t.deliveredDate&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Delivered"}),(0,r.jsx)("p",{className:"text-green-400",children:n(t.deliveredDate)})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-800/50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"font-semibold text-white mb-4",children:"Customer Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Name"}),(0,r.jsx)("p",{className:"text-white",children:t.customerName})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Email"}),(0,r.jsx)("p",{className:"text-white",children:t.customerEmail})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Phone"}),(0,r.jsx)("p",{className:"text-white",children:t.customerPhone})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Shipping Address"}),(0,r.jsx)("p",{className:"text-white",children:t.shippingAddress})]})]})]}),(0,r.jsxs)("div",{className:"bg-gray-800/50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"font-semibold text-white mb-4",children:"Products"}),(0,r.jsxs)("div",{className:"space-y-3",children:[t.products.map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-700/50 rounded",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white font-medium",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-400",children:["Quantity: ",e.quantity]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("p",{className:"text-white font-semibold",children:["€",e.price]}),(0,r.jsxs)("p",{className:"text-sm text-gray-400",children:["€",e.price*e.quantity," total"]})]})]},t)),(0,r.jsx)("div",{className:"border-t border-gray-600 pt-3 mt-3",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("span",{className:"text-lg font-semibold text-white",children:"Total"}),(0,r.jsxs)("span",{className:"text-xl font-bold text-green-400",children:["€",t.total]})]})})]})]}),t.trackingNumber&&(0,r.jsxs)("div",{className:"bg-gray-800/50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"font-semibold text-white mb-2",children:"Tracking Information"}),(0,r.jsx)("p",{className:"text-cyan-400 font-mono",children:t.trackingNumber}),(0,r.jsx)("button",{className:"mt-2 px-4 py-2 bg-cyan-500/20 text-cyan-400 border border-cyan-500/30 rounded hover:bg-cyan-500/30 transition-colors",children:"View Tracking Details"})]}),t.notes&&(0,r.jsxs)("div",{className:"bg-gray-800/50 p-4 rounded-lg",children:[(0,r.jsx)("h3",{className:"font-semibold text-white mb-2",children:"Notes"}),(0,r.jsx)("p",{className:"text-gray-300",children:t.notes})]}),(0,r.jsxs)("div",{className:"flex space-x-3 pt-4 border-t border-gray-700",children:[(0,r.jsx)("button",{className:"px-4 py-2 bg-cyan-500/20 text-cyan-400 border border-cyan-500/30 rounded hover:bg-cyan-500/30 transition-colors",children:"Print Invoice"}),(0,r.jsx)("button",{className:"px-4 py-2 bg-blue-500/20 text-blue-400 border border-blue-500/30 rounded hover:bg-blue-500/30 transition-colors",children:"Send Email Update"}),(0,r.jsx)("button",{className:"px-4 py-2 bg-green-500/20 text-green-400 border border-green-500/30 rounded hover:bg-green-500/30 transition-colors",children:"Generate Shipping Label"}),"pending"===t.status&&(0,r.jsx)("button",{className:"px-4 py-2 bg-red-500/20 text-red-400 border border-red-500/30 rounded hover:bg-red-500/30 transition-colors",children:"Cancel Order"})]})]})]})})}function i(e){let{filters:t,onFilterChange:s}=e;return(0,r.jsxs)("div",{className:"bg-gray-900/50 border border-gray-700 rounded-lg p-4 mb-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Filters"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm text-gray-400 mb-2 block",children:"Status"}),(0,r.jsxs)("select",{value:t.status,onChange:e=>s("status",e.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white",children:[(0,r.jsx)("option",{value:"",children:"All Statuses"}),(0,r.jsx)("option",{value:"pending",children:"Pending"}),(0,r.jsx)("option",{value:"processing",children:"Processing"}),(0,r.jsx)("option",{value:"shipped",children:"Shipped"}),(0,r.jsx)("option",{value:"delivered",children:"Delivered"}),(0,r.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm text-gray-400 mb-2 block",children:"Payment"}),(0,r.jsxs)("select",{value:t.paymentStatus,onChange:e=>s("paymentStatus",e.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white",children:[(0,r.jsx)("option",{value:"",children:"All Payments"}),(0,r.jsx)("option",{value:"paid",children:"Paid"}),(0,r.jsx)("option",{value:"pending",children:"Pending"}),(0,r.jsx)("option",{value:"failed",children:"Failed"}),(0,r.jsx)("option",{value:"refunded",children:"Refunded"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm text-gray-400 mb-2 block",children:"From Date"}),(0,r.jsx)("input",{type:"date",value:t.startDate,onChange:e=>s("startDate",e.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm text-gray-400 mb-2 block",children:"To Date"}),(0,r.jsx)("input",{type:"date",value:t.endDate,onChange:e=>s("endDate",e.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white"})]})]}),(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("label",{className:"text-sm text-gray-400 mb-2 block",children:"Search Orders"}),(0,r.jsx)("input",{type:"text",placeholder:"Search by order ID, customer name, or email...",value:t.search,onChange:e=>s("search",e.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded px-3 py-2 text-white"})]}),(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)("button",{onClick:()=>s("clear"),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-500 transition-colors",children:"Clear Filters"})})]})}function o(){let[e,t]=(0,a.useState)([]),[s,l]=(0,a.useState)([]),[n,o]=(0,a.useState)(null),[x,h]=(0,a.useState)(!1),[m,g]=(0,a.useState)([]),[u,p]=(0,a.useState)("orderDate"),[b,y]=(0,a.useState)("desc"),[j,N]=(0,a.useState)(!0),[v,f]=(0,a.useState)({status:"",paymentStatus:"",startDate:"",endDate:"",search:""});(0,a.useEffect)(()=>{(async()=>{try{N(!0);let e=new URLSearchParams;v.status&&e.set("status",v.status),v.paymentStatus&&e.set("paymentStatus",v.paymentStatus),v.startDate&&e.set("startDate",v.startDate),v.endDate&&e.set("endDate",v.endDate),v.search&&e.set("search",v.search);let s=await fetch("/api/admin/orders?".concat(e)),r=await s.json();t(r)}catch(e){console.error("Error fetching orders:",e)}finally{N(!1)}})()},[v]),(0,a.useEffect)(()=>{let t=e.filter(e=>{if(v.status&&e.status!==v.status||v.paymentStatus&&e.paymentStatus!==v.paymentStatus||v.startDate&&new Date(e.orderDate)<new Date(v.startDate)||v.endDate&&new Date(e.orderDate)>new Date(v.endDate))return!1;if(v.search){let t=v.search.toLowerCase();return e.id.toLowerCase().includes(t)||e.customerName.toLowerCase().includes(t)||e.customerEmail.toLowerCase().includes(t)}return!0});t.sort((e,t)=>{let s=e[u],r=t[u];return("orderDate"===u&&(s=new Date(s),r=new Date(r)),"asc"===b)?s>r?1:-1:s<r?1:-1}),l(t)},[e,v,u,b]);let w=e=>{o(e),h(!0)},D=async(s,r)=>{try{if((await fetch("/api/admin/orders",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({orderId:s,status:r})})).ok){let a=e.map(e=>e.id===s?{...e,status:r}:e);t(a),n&&n.id===s&&o({...n,status:r})}else throw Error("Failed to update order status")}catch(e){console.error("Error updating order:",e),alert("Failed to update order status")}},S=e=>{u===e?y("asc"===b?"desc":"asc"):(p(e),y("asc"))},C=e=>{g(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},k=e=>{console.log("Performing bulk action: ".concat(e," on orders:"),m),g([])},P=e=>new Date(e).toLocaleDateString("en-GB",{year:"numeric",month:"short",day:"numeric"});return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-800 to-black text-white",children:[(0,r.jsxs)("div",{className:"container mx-auto px-6 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-cyan-400 mb-2",children:"Order Management"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Manage and track all customer orders"})]}),(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("button",{className:"px-4 py-2 bg-green-500/20 text-green-400 border border-green-500/30 rounded hover:bg-green-500/30 transition-colors",children:"Export Orders"}),(0,r.jsx)("button",{className:"px-4 py-2 bg-cyan-500/20 text-cyan-400 border border-cyan-500/30 rounded hover:bg-cyan-500/30 transition-colors",children:"Create Order"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,r.jsxs)("div",{className:"bg-gray-900/50 border border-cyan-500/20 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Total Orders"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-white",children:e.length}),(0,r.jsx)("p",{className:"text-sm text-green-400",children:"+12% from last month"})]}),(0,r.jsxs)("div",{className:"bg-gray-900/50 border border-cyan-500/20 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Pending Orders"}),(0,r.jsx)("p",{className:"text-2xl font-bold text-white",children:e.filter(e=>"pending"===e.status).length}),(0,r.jsx)("p",{className:"text-sm text-yellow-400",children:"Needs attention"})]}),(0,r.jsxs)("div",{className:"bg-gray-900/50 border border-cyan-500/20 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Total Revenue"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-white",children:["€",e.reduce((e,t)=>e+t.total,0).toLocaleString()]}),(0,r.jsx)("p",{className:"text-sm text-green-400",children:"+8% from last month"})]}),(0,r.jsxs)("div",{className:"bg-gray-900/50 border border-cyan-500/20 rounded-lg p-6",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-400 mb-2",children:"Avg Order Value"}),(0,r.jsxs)("p",{className:"text-2xl font-bold text-white",children:["€",Math.round(e.reduce((e,t)=>e+t.total,0)/e.length)]}),(0,r.jsx)("p",{className:"text-sm text-cyan-400",children:"Stable"})]})]}),(0,r.jsx)(i,{filters:v,onFilterChange:(e,t)=>{"clear"===e?f({status:"",paymentStatus:"",startDate:"",endDate:"",search:""}):f(s=>({...s,[e]:t}))}}),m.length>0&&(0,r.jsx)("div",{className:"bg-cyan-500/20 border border-cyan-500/30 rounded-lg p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("span",{className:"text-cyan-400",children:[m.length," orders selected"]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{onClick:()=>k("mark-processing"),className:"px-3 py-1 bg-blue-500/20 text-blue-400 border border-blue-500/30 rounded text-sm hover:bg-blue-500/30 transition-colors",children:"Mark as Processing"}),(0,r.jsx)("button",{onClick:()=>k("export"),className:"px-3 py-1 bg-green-500/20 text-green-400 border border-green-500/30 rounded text-sm hover:bg-green-500/30 transition-colors",children:"Export Selected"}),(0,r.jsx)("button",{onClick:()=>g([]),className:"px-3 py-1 bg-gray-500/20 text-gray-400 border border-gray-500/30 rounded text-sm hover:bg-gray-500/30 transition-colors",children:"Clear Selection"})]})]})}),(0,r.jsxs)("div",{className:"bg-gray-900/50 border border-gray-700 rounded-lg overflow-hidden",children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full",children:[(0,r.jsx)("thead",{className:"bg-gray-800/50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"p-4 text-left",children:(0,r.jsx)("input",{type:"checkbox",onChange:e=>{e.target.checked?g(s.map(e=>e.id)):g([])},className:"rounded"})}),(0,r.jsxs)("th",{className:"p-4 text-left text-gray-400 cursor-pointer hover:text-white",onClick:()=>S("id"),children:["Order ID ","id"===u&&("asc"===b?"↑":"↓")]}),(0,r.jsxs)("th",{className:"p-4 text-left text-gray-400 cursor-pointer hover:text-white",onClick:()=>S("customerName"),children:["Customer ","customerName"===u&&("asc"===b?"↑":"↓")]}),(0,r.jsxs)("th",{className:"p-4 text-left text-gray-400 cursor-pointer hover:text-white",onClick:()=>S("total"),children:["Total ","total"===u&&("asc"===b?"↑":"↓")]}),(0,r.jsx)("th",{className:"p-4 text-left text-gray-400",children:"Status"}),(0,r.jsx)("th",{className:"p-4 text-left text-gray-400",children:"Payment"}),(0,r.jsxs)("th",{className:"p-4 text-left text-gray-400 cursor-pointer hover:text-white",onClick:()=>S("orderDate"),children:["Date ","orderDate"===u&&("asc"===b?"↑":"↓")]}),(0,r.jsx)("th",{className:"p-4 text-left text-gray-400",children:"Actions"})]})}),(0,r.jsx)("tbody",{children:s.map(e=>(0,r.jsxs)("tr",{className:"border-t border-gray-700 hover:bg-gray-800/30 cursor-pointer",onClick:()=>w(e),children:[(0,r.jsx)("td",{className:"p-4",onClick:e=>e.stopPropagation(),children:(0,r.jsx)("input",{type:"checkbox",checked:m.includes(e.id),onChange:()=>C(e.id),className:"rounded"})}),(0,r.jsx)("td",{className:"p-4",children:(0,r.jsx)("span",{className:"font-mono text-cyan-400",children:e.id})}),(0,r.jsx)("td",{className:"p-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-white font-medium",children:e.customerName}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:e.customerEmail})]})}),(0,r.jsx)("td",{className:"p-4",children:(0,r.jsxs)("span",{className:"text-white font-semibold",children:["€",e.total]})}),(0,r.jsx)("td",{className:"p-4",children:(0,r.jsx)(d,{status:e.status})}),(0,r.jsx)("td",{className:"p-4",children:(0,r.jsx)(d,{status:e.paymentStatus,type:"payment"})}),(0,r.jsx)("td",{className:"p-4 text-gray-300",children:P(e.orderDate)}),(0,r.jsx)("td",{className:"p-4",onClick:e=>e.stopPropagation(),children:(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{className:"px-2 py-1 bg-cyan-500/20 text-cyan-400 border border-cyan-500/30 rounded text-xs hover:bg-cyan-500/30 transition-colors",onClick:()=>w(e),children:"View"}),(0,r.jsx)("button",{className:"px-2 py-1 bg-blue-500/20 text-blue-400 border border-blue-500/30 rounded text-xs hover:bg-blue-500/30 transition-colors",children:"Edit"})]})})]},e.id))})]})}),0===s.length&&(0,r.jsx)("div",{className:"p-8 text-center",children:(0,r.jsx)("p",{className:"text-gray-400",children:"No orders found matching your criteria"})})]}),(0,r.jsxs)("div",{className:"flex justify-between items-center mt-6",children:[(0,r.jsxs)("p",{className:"text-gray-400",children:["Showing ",s.length," of ",e.length," orders"]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)("button",{className:"px-3 py-1 bg-gray-700 text-white rounded hover:bg-gray-600 transition-colors",children:"Previous"}),(0,r.jsx)("button",{className:"px-3 py-1 bg-cyan-500 text-white rounded",children:"1"}),(0,r.jsx)("button",{className:"px-3 py-1 bg-gray-700 text-white rounded hover:bg-gray-600 transition-colors",children:"2"}),(0,r.jsx)("button",{className:"px-3 py-1 bg-gray-700 text-white rounded hover:bg-gray-600 transition-colors",children:"Next"})]})]})]}),(0,r.jsx)(c,{order:n,isOpen:x,onClose:()=>h(!1),onStatusUpdate:D})]})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=459)}),_N_E=e.O()}]);